
<!DOCTYPE html>
<html>
<head>
<title>sakila index</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
	body {
		padding: 0;
		margin: 0;
		width: 100%;
		height: 100%;
		overflow: hidden;
		background-position: 0 0;
		background-repeat: no-repeat;
		background-attachment: fixed;
		background-size: cover;
		position: relative;
		overflow-y: auto;
	}
	
	#aside {
		width: 200px;
		height: 3000px;
		position: fixed;
		background: orange;
		overflow: hidden;
		float: left;
	}
	
	#section {
		margin-left: 300px;
		margin-right: 100px;
		margin-bottom: 100px;
		background: white;
	}
</style>
</head>
<body>
	<div id="aside">
		
	</div>
	<div id="section">
		<h1>CUSTOMER</h1>
		<h2>add customer</h2>
		<div>
			<table>
			<tr>
				<td>
					<select size="10" id ="countryList">
					</select>
				</td>
				<td>
					<select size="10" id ="cityList">
					</select>
				</td>
			</tr>
			</table>
		</div>
		
		<h2>customer LIST</h2>
		<fieldset>
			<legend>주소정보</legend>
				<div>cityId : <input type="text" id="cityId" readonly="readonly"></div>
				<div>address : <input type="text" id="address"></div>
				<div>address2 : <input type="text" id="address2"></div>
				<div>district : <input type="text" id="district" ></div>
				<div>postalcode : <input type="text" id="postalcode"></div>
				<div>phone : <input type="text" id="phone"></div>
		</fieldset>
		
		<fieldset>
			<legend>고객정보</legend>
				<div>storeId : <input type="text" id="storeid"></div>
				<div>FirstName : <input type="text" id="firstname"></div>
				<div>LastName : <input type="text" id="lastname"></div>
				<div>E-Mail : <input type="text" id="email"></div>
		</fieldset>
		<button type="button" id="add">주소 입력</button>
		
		<h2>customer LIST</h2>
	
		<table>
			<thead>
				<tr>	
					<th>customerId</th>
					<th>storeId</th>	
					<th>firstName</th>
					<th>lastName</th>
					<th>addressId</th>
					<th>active</th>
				</tr>
			</thead>
			<tbody>
				
			</tbody>
		</table>
		
		
	</div>
	
	
	
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
$("#aside").load("/sakila/aside.html");

$.ajax({
	url:"/sakila/selectCountryAllList",
	method:"POST",
	success:function(json){
		console.log(json);
		$("#countryList").empty();
		$(json).each(function(index,item){
			temp="<option value='";
			temp+=item.countryId;
			temp+="'>";
			temp+=item.country;
			temp+="</option>";
			$("#countryList").append(temp);
		});
	}
});

$("#countryList").change(function(){
	$.ajax({
		url:"/sakila/SelectCityListByCountryServlet",
		method:"POST",
		data:{"countryId":$("#countryList").val()},
		success:function(json){
			console.log(json);
			$("#cityList").empty();
			$(json).each(function(index,item){
				temp="<option value='";
				temp+=item.cityId;
				temp+="'>";
				temp+=item.city;
				temp+="</option>";
				$("#cityList").append(temp);
			});
		}
	});
})

$("#cityList").change(function(){
	$("#cityId").val($("#cityList").val());
});


$("#add").click(function(){
	
	console.log("#addCountry click!");
	console.log("cityId : ", $("#cityId").val());
	console.log("address : ", $("#address").val());
	console.log("address2 : ", $("#address2").val());
	console.log("district : ", $("#district").val());
	console.log("postalcode : ", $("#postalcode").val());
	console.log("phone : ", $("#phone").val());
	
	console.log("storeid : ", $("#storeid").val());
	console.log("firstname : ", $("#firstname").val());
	console.log("lastname : ", $("#lastname").val());
	console.log("email : ", $("#email").val());
	
	$.ajax({
		url:"/sakila/InsertCustomer",
		method:"POST",
		data:{"cityId":$("#cityId").val(),"address":$("#address").val(),"address2":$("#address2").val(),"district":$("#district").val(),"postalcode":$("#postalcode").val(),"phone":$("#phone").val(),"storeid":$("#storeid").val(),"firstname":$("#firstname").val(),"lastname":$("#lastname").val(),"email":$("#email").val()},
		success: console.log("입력완료")
	});	
})
</script>
</html>